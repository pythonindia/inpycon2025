{% macro navbar(isHomePage = false) %}
<nav class="w-full flex justify-center {% if isHomePage %}bg-black{% else %}bg-[#4E62F5]{% endif %} z-50 fixed top-0">
  <!-- Desktop Navbar -->
  <div class="w-full max-w-4xl mx-auto px-6 hidden md:block py-2">
    <div class="relative flex justify-center items-center h-10 px-6 {% if isHomePage %}bg-black{% else %}bg-[#4E62F5]{% endif %}">
      <ul class="flex items-center justify-center w-full gap-8 relative">
        {% set menuItems = [
          {
            "name": "About",
            "link": "/about",
            "hasSubmenu": true,
            "submenu": [
              {"name": "Our Team", "link": "/about/team"},
              {"name": "FAQ", "link": "/about/faq"}
            ]
          },
          {
            "name": "Schedule",
            "link": "/schedule",
            "hasSubmenu": false
          },
          {
            "name": "Venue",
            "link": "/venue",
            "hasSubmenu": false
          },
          {
            "name": "Program",
            "link": "/program",
            "hasSubmenu": false
          },
          {
            "name": "Sponsors",
            "link": "/sponsors",
            "hasSubmenu": false
          },
          {
            "name": "CoC",
            "hasSubmenu": true,
            "submenu": [
              {"name": "Code of Conduct Policy", "link": "/coc/guidelines"},
              {"name": "Code of Conduct Reporting", "link": "/coc/reporting"}
            ]
          },
          {
            "name": "Blog",
            "link": "/blog",
            "hasSubmenu": false
          }
        ] %}
        
        <!-- Radio group for desktop menu -->
        <input type="radio" id="desktop-menu-close-all" name="desktop-menu-radio" class="sr-only hidden" checked>
        {% for item in menuItems %}
          {% if item.hasSubmenu %}
            <input type="radio" id="desktop-menu-radio-{{ loop.index }}" name="desktop-menu-radio" class="sr-only hidden">
          {% endif %}
        {% endfor %}
        
        {% for item in menuItems %}
          <li class="relative">
            {% if item.hasSubmenu %}
              <!-- Menu item with submenu -->
              <label for="desktop-menu-radio-{{ loop.index }}" 
                     class="flex items-center gap-1 py-1 px-2 text-white hover:text-[#D7FF7B] text-sm font-normal font-['Acid_Grotesk'] leading-tight transition-colors duration-200 cursor-pointer">
                {{ item.name }}
                <svg xmlns="http://www.w3.org/2000/svg" width="10" height="6" viewBox="0 0 10 6" class="fill-current text-gray-400 transition-transform duration-200">
                  <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                </svg>
              </label>
              
              <!-- Hidden overlay to close menu when clicking elsewhere -->
              <label for="desktop-menu-close-all" class="fixed inset-0 bg-transparent z-0 hidden"></label>
              
              <!-- Submenu dropdown -->
              <div class="absolute left-0 top-full mt-2 w-64 invisible opacity-0 transition-all duration-200 z-10 transform origin-top scale-95">
                <div class="inline-flex justify-start items-start gap-3 overflow-hidden rounded">   
                  <div class="flex-1 inline-flex flex-col justify-start items-start w-full">     
                    {% for subitem in item.submenu %}
                    <div class="self-stretch p-4 bg-[#f0eeff] hover:bg-[#d7ff7b] border border-black inline-flex justify-start items-center gap-4 transition-colors duration-150">       
                      <div class="flex-1 inline-flex flex-col justify-start items-start gap-1">         
                        <a href="{{ subitem.link }}" class="text-gray-600 hover:text-[#4662ff] text-sm font-medium font-['Inter'] leading-tight no-underline">
                          {{ subitem.name }}
                        </a>       
                      </div>       
                      <div class="size-5 relative overflow-hidden">         
                        <div class="bg-gray-400 hover:bg-[#4e62f5] w-[5.49px] h-[9.31px] left-[7.50px] top-[5.35px] absolute transition-colors duration-150"></div>       
                      </div>     
                    </div>
                    {% endfor %}
                  </div> 
                </div>
              </div>
            {% else %}
              <!-- Regular menu item (no submenu) -->
              <a href="{{ item.link }}"
                  class="flex items-center gap-1 py-1 px-2 text-white hover:text-[#D7FF7B] text-sm font-normal font-['Acid_Grotesk'] leading-tight transition-colors duration-200 no-underline">
                {{ item.name }}
              </a>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <!-- Templete Logic CSS for desktop menu radio behavior (Can't able to declare in global css files like main.css/ tailwind.config.js) -->
  <style>
    {% for item in menuItems %}
      {% if item.hasSubmenu %}
      #desktop-menu-radio-{{ loop.index }}:checked ~ li:nth-of-type({{ loop.index }}) .fixed {
        display: block;
      }
      #desktop-menu-radio-{{ loop.index }}:checked ~ li:nth-of-type({{ loop.index }}) .absolute {
        visibility: visible;
        opacity: 1;
        transform: scale(1);
      }
      #desktop-menu-radio-{{ loop.index }}:checked ~ li:nth-of-type({{ loop.index }}) svg {
        transform: rotate(180deg);
        color: #D7FF7B;
      }
      {% endif %}
    {% endfor %}
  </style>

  <!-- Mobile Navbar Toggle -->
  <div class="flex justify-between items-center px-4 py-2 w-full md:hidden {% if isHomePage %}bg-black z-40{% else %}bg-[#4E62F5]{% endif %} border-0">
    <div class="text-white text-sm font-bold font-['Acid_Grotesk']"></div>
    <input type="checkbox" id="mobile-menu-checkbox" class="sr-only peer">
    <label for="mobile-menu-checkbox" class="cursor-pointer {% if isHomePage %}z-40{% endif %}">
      <img src="/img/assets/mobile_nav_burger.svg" class="w-6 h-6">
    </label>
    
    <!-- Mobile Menu (Full Screen) -->
    <div class="fixed inset-0 {% if isHomePage %}top-0 z-50{% else %}top-0{% endif %} bg-[#4E62F5] transform translate-x-full peer-checked:translate-x-0 transition-transform duration-300 ease-in-out md:hidden overflow-y-auto">
      <div class="flex flex-col h-full {% if isHomePage %}pt-[60px]{% endif %}">
        <!-- Close button header area - completely removed when on homepage -->
        <div class="flex justify-end items-center p-4 border-b border-white/20 sticky top-0 bg-inherit">
          <label for="mobile-menu-checkbox" class="bg-white/10 rounded-full p-2 transition-all duration-300 hover:bg-white/20 cursor-pointer">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </label>
        </div>
        
        <div class="px-4 py-4 overflow-y-auto">
          <div class="inline-flex flex-col justify-start items-start w-full space-y-3">
            {% for item in menuItems %}
              {% if not item.hasSubmenu %}
                <!-- Regular menu item -->
                <div class="w-full p-3 bg-white/90 backdrop-blur-sm border border-[#4E62F5]/30 rounded-lg shadow-lg shadow-black/10 inline-flex justify-between items-center hover:bg-[#d7ff7b] transition-all duration-200">
                  <div class="h-6 inline-flex flex-col justify-between items-start">
                    <a href="{{ item.link }}" class="justify-start text-[#4E62F5] text-sm font-medium font-['Inter'] leading-tight no-underline">
                      {{ item.name }}
                    </a>
                  </div>
                  <div class="size-5 relative overflow-hidden">
                    <div class="w-[5.49px] h-[9.31px] left-[7.50px] top-[5.35px] absolute bg-[#4E62F5]"></div>
                  </div>
                </div>
              {% else %}
                <!-- Menu item with submenu -->
                <div class="w-full">
                  <input type="checkbox" id="submenu-checkbox-{{ loop.index }}" class="sr-only peer">
                  <label for="submenu-checkbox-{{ loop.index }}" class="w-full p-3 bg-white/90 backdrop-blur-sm border border-[#4E62F5]/30 rounded-lg shadow-lg shadow-black/10 inline-flex justify-between items-center cursor-pointer hover:bg-[#d7ff7b] peer-checked:bg-[#d7ff7b] transition-all duration-200 block">
                    <div class="h-6 inline-flex flex-col justify-between items-start">
                      <div class="justify-start text-[#4E62F5] text-sm font-medium font-['Inter'] leading-tight">
                        {{ item.name }}
                      </div>
                    </div>
                    <div class="size-5 relative overflow-hidden transition-transform duration-300 peer-checked:rotate-90">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-[#4E62F5]">
                        <polyline points="9 18 15 12 9 6"></polyline>
                      </svg>
                    </div>
                  </label>
                  
                  <!-- Mobile Submenu -->
                  <div class="w-full hidden peer-checked:block mt-1 overflow-hidden rounded-lg transition-all duration-300">
                    <div class="w-full bg-[#d7ff7b]/90 backdrop-blur-sm border border-[#4E62F5]/30 rounded-lg p-3 flex flex-col justify-center items-start gap-3">
                      {% for subitem in item.submenu %}
                        <div class="self-stretch flex flex-col justify-between items-start w-full">
                          <a href="{{ subitem.link }}" class="w-full justify-start text-gray-800 text-xs py-2 font-medium font-['Inter'] leading-tight hover:text-[#D7FF7B] transition-colors duration-200 no-underline">
                            {{ subitem.name }}
                          </a>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
        
        <div class="mt-auto p-4 border-t border-white/20 bg-white/5">
          <div class="text-white/80 text-xs text-center">
            © 2025 Pycon India. All rights reserved.
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
{% endmacro %}